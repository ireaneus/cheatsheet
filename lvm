# Exclusive Activation of a Volume Group in a Cluster 
# Link --> https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/High_Availability_Add-On_Administration/s1-exclusiveactive-HAAA.html 
1> vgs --noheadings -o vg_name
2> volume_list = [ "rhel_root", "rhel_home" ]
3> dracut -H -f /boot/initramfs-$(uname -r).img $(uname -r)
4> Reboot the node
5> uname -r to verify the correct initrd image

# LVM Logical Volume Management for Virtual Machines
#  Take a snapshot prior to starting this
1. Login to vSphere
2. Edit settings on box
3. Examine the settings of the other drive you want to expand, make a note of the
datastore it is on, the Type of disk, if it is Thin, you will want to set your new drive with
the settings listed below:
4. Verify independent and virtual device node match the other drives then finish

# Adding a new drive and creating a new volume group

5. Run fdisk -l	# should show newly added disk, you may need to run scan from the /sys/class/scsi_host/host1/scan
6. Run fdisk /dev/sdb
7. Create new Primary partition - (n,p,1,+sizeG,t,8e,p,w)
8. Run cat /proc/partitions 	# if it doesn't show up run partx -a /dev/sdb, then run cat again
9. Run pvcreate /dev/sdb1
10. Run vgcreate VolumeName /dev/sdb1
11. Run vgdisplay -v
12. Run lvcreate -L 9G -n LogicalName VolumeName
13. lvdisplay, vgscan, lvscan
14. mkfs.ext4 /dev/VolumeName/LogicalName
15. mount /dev/mapper/VolumeName-LogicalName /mountemptydirectory
16. df -h	# Displays mounted volumes

# Extending a Physical Volume
fdisk -l
parted -l
cfdisk /dev/sdc
echo "- - -" > /sys/class/scsi_host/host0/scan		# added physical disk
echo 1 > /sys/class/scsci_device/<device>/device/rescan	# added space to existing disk
pvresize /dev/sdc

# Extending a volume group
17. create new primary partition in fdisk
18. create a new physical volume - pvcreate /dev/sdb1 /dev/sdb2
19. pvdisplay
20. vgextend /dev/mapper/VolumeName /dev/sdb2 - vgdisplay
21. lvextend /dev/mapper/VolumeName/LogicalName /dev/sdb2 - lvdisplay
22. e2fsck -f /dev/VolumeName/LogicalName
23. resize2fs /dev/VolumeName/LogicalName
24. df -h; mount -a; df -h

# Extending a Logical Volume
lvextend -L4G /dev/vgAPPS/lvca
resize2fs /dev/vgAPPS/lvca

# For xfs file system (RedHat 7.1 /home)
22. yum install xfsprogs.x86_64
23. mount -t xfs /dev/mapper/VolumeName-LogicalName /home
24. xfs_growfs /home
25. df -h

# Remove a bad hdd.
26. remove bad drive.
27. lvremove /dev/vg/lv
28. vgreduce --removemissing

# More information
lvs --units m -o devices
parted -l  		# shows size in mb
pvresize /dev/sdc	# if vm disk has been increased
